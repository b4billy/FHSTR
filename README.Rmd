---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# FHSTR

<!-- badges: start -->
<!-- badges: end -->

This package currently provides data from the 2022 Beijing Olympics from NBC's API. The name of this package comes from the Olympic Motto: "Faster, Higher, Stronger - Together". This package is still a work in progress and new functions will hopefully be added soon! This package will likely be updated to include Paris 2024 Data when that event comes around.

## Installation

You can install the development version of FHSTR from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("b4billy/FHSTR")
```

## Preloaded Datasets

So far there are 3 pre-loaded data sets in the FHSTR package to help get you started. To learn more about these data sets, try the code chunk below!

```{r builtin, eval=FALSE}
library(FHSTR)
?sport_list
?date_list
?schedule_matrix
```

## Determining Match IDs

For every event, there is a unique MatchID. To figure out which matchID corresponds to which game use the following code:

```{r matchID, eval = FALSE}
hockey_matchIDs <- load_olympic_matchID_key(sportID = 113) # Hockey
```

## Sport Schedules

The sport schedules are similar to the matchID keys except they contain more information such as whether medals were awarded or location of events. Sport schedules can be found by running the code below:

```{r sportschedule, eval = FALSE}
hockey_sport_schedule <- load_olympic_sport_schedules(sportID = 113)
```

## Loading Event Data

Data from the events is available in 2 different formats: raw JSON files and pre-parsed CSVs. The advantage of having access to the JSON files is that you are able to dig through and find more data available than what is present in the CSVs. This is typically more time consuming. That is why pre-parsed CSVs are available. Sample code below:

```{r eventdata, eval=FALSE}
 # W Hockey USA vs Canada CSV Data
csv_data <- load_olympic_csv_data(sportID = 113, matchID = 746587)

# W Hockey USA vs Canada JSON Data
json_data <- load_olympic_json_data(sportID = 113, matchID = 746587)
```

## Sample Work Flow

A sample work flow can be seen below:

```{r workflow, eval = FALSE}
# Call the Package
library(FHSTR)

# Get Sport List
sport_list <- FHSTR::sport_list

# Filter to desired Sport
hockey <- dplyr::filter(sport_list, sport_list$c_Sport == "Hockey")

# Pull the Sport ID
sportID <- hockey$n_SportID

# Look For USA vs Canada Match Gold Medal W Hockey Match
all_hockey_matches <- load_olympic_matchID_key(sportID)

# Filter to Only USA vs Canada Matches
usa_canada <- filter(all_hockey_matches, 
                     # Team 1 is USA and Team 2 is Canada or Reverse
                     (Team1 == "USA" & Team2 == "CAN") |
                     (Team2 == "USA" & Team1 == "CAN") &
                      Event == "Women's Tournament")

# The Gold Medal match is the second record
usa_canada_goldID <- usa_canada[2,]$MatchID

# Load CSV and JSON Data
csv_data <- load_olympic_csv_data(sportID = sportID, 
                                  matchID = usa_canada_goldID)
json_data <- load_olympic_json_data(sportID = sportID, 
                                    matchID = usa_canada_goldID)
```